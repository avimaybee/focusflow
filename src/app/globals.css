
@tailwind base;
@tailwind components;
@tailwind utilities;

@import "../styles/ellipsis-spinner.css";

@layer base {
  html {
    scroll-behavior: smooth;
  }

  :root {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 90%;
    --card: 0 0% 7%;
    --card-foreground: 0 0% 90%;
    --popover: 0 0% 7%;
    --popover-foreground: 0 0% 90%;
    --primary: 170 45% 50%;
    --primary-foreground: 170 20% 91%;
    --secondary: 0 0% 10%;
    --secondary-foreground: 0 0% 90%;
    --muted: 0 0% 14%;
    --muted-foreground: 0 0% 78%;
    --accent: 170 45% 50%;
    --accent-foreground: 170 20% 91%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 90%;
    --border: 0 0% 18%;
    --input: 0 0% 14.9%;
    --ring: 170 50% 55%;
    --radius: 0.5rem;
    --surface-raised: 0 0% 7%;
    --surface-soft: 0 0% 10%;
    --surface-muted: 0 0% 14%;
    --surface-alt: 0 0% 3.9%;
    --stroke-subtle: 0 0% 14.9%;
    --stroke-medium: 0 0% 20%;
    --stroke-strong: 0 0% 25%;
    --text-secondary: 0 0% 85%;
    --text-tertiary: 0 0% 78%;
    --dot-background: 0 0% 14.9%;
    --focus-ring-inverse: 0 0% 10%;
    --shadow-xs: 0px 1px 0px rgba(0, 0, 0, 0.4);
    --shadow-sm: 0px 8px 16px rgba(0, 0, 0, 0.25);
    --state-success: 110 43% 55%;
    --state-warning: 48 96% 53%;
  }

  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 90%;
    --card: 0 0% 7%;
    --card-foreground: 0 0% 90%;
    --popover: 0 0% 7%;
    --popover-foreground: 0 0% 90%;
    --primary: 170 45% 50%;
    --primary-foreground: 170 20% 91%;
    --secondary: 0 0% 10%;
    --secondary-foreground: 0 0% 90%;
    --muted: 0 0% 14%;
    --muted-foreground: 0 0% 78%;
    --accent: 170 45% 50%;
    --accent-foreground: 170 20% 91%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 90%;
    --border: 0 0% 18%;
    --input: 0 0% 14.9%;
    --ring: 170 50% 55%;
    --surface-raised: 0 0% 7%;
    --surface-soft: 0 0% 10%;
    --surface-muted: 0 0% 14%;
    --surface-alt: 0 0% 3.9%;
    --stroke-subtle: 0 0% 14.9%;
    --stroke-medium: 0 0% 20%;
    --stroke-strong: 0 0% 25%;
    --text-secondary: 0 0% 85%;
    --text-tertiary: 0 0% 78%;
    --dot-background: 0 0% 14.9%;
    --focus-ring-inverse: 0 0% 10%;
    --shadow-xs: 0px 1px 0px rgba(0, 0, 0, 0.4);
    --shadow-sm: 0px 8px 16px rgba(0, 0, 0, 0.25);
    --state-success: 110 43% 55%;
    --state-warning: 48 96% 53%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground font-body;
    min-height: 100vh;
  }
  h1, h2, h3, h4, h5, h6 {
    @apply font-heading;
  }
  
  /* Enhanced focus indicators for accessibility */
  *:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
  }
  
  button:focus-visible,
  a:focus-visible,
  [role="button"]:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
    box-shadow: 0 0 0 4px hsl(var(--ring) / 0.2);
  }
  
  .group\/sidebar:hover ::-webkit-scrollbar {
    opacity: 1;
  }
  ::-webkit-scrollbar { 
    width: 4px;
    height: 4px;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
  }
  ::-webkit-scrollbar-thumb { 
    @apply bg-muted-foreground/30 rounded-full;
  }

  /* Tiptap editor placeholder styles */
  .ProseMirror p.is-editor-empty:first-child::before {
    content: attr(data-placeholder);
    float: left;
    color: hsl(var(--muted-foreground));
    pointer-events: none;
    height: 0;
  }
}

@layer components {
  .premium-gradient {
    @apply bg-primary text-primary-foreground;
  }

  .glowing-card {
    @apply relative rounded-lg border border-border bg-secondary;
  }
  .glowing-card::before {
    content: none;
  }
  .glowing-card > .glowing-card-content {
    @apply h-full w-full rounded-[7px] bg-secondary;
  }

  /* Hide scrollbars but keep functionality */
  .scrollbar-hidden {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
  .scrollbar-hidden::-webkit-scrollbar {
    display: none;  /* Chrome, Safari and Opera */
  }

  /* Vertical Scrolling Heading Text Styles */
  .flip-heading {
    display: flex;
    justify-content: center;
    cursor: default;
    outline: none;
  }
  
  .letter-container {
    display: inline-block;
    height: 1em; /* Set to the height of one letter */
    line-height: 1em;
    overflow: hidden;
  }
  
  .letter-scroller {
    display: block;
    transform: translateY(0);
    transition: transform 0.6s cubic-bezier(0.76, 0, 0.24, 1);
    transition-delay: var(--delay);
  }
  
  .letter-scroller span {
    display: block;
    height: 1em;
    line-height: 1em;
  }
  
  .flip-heading:hover .letter-scroller,
  .flip-heading:focus-within .letter-scroller {
    transform: translateY(-1em); /* Move up by the height of one letter */
  }
  
  /* Announcement Banner Styles */
  .announcement-banner {
    @apply flex items-center justify-center p-1.5 transition-all;
  }
  .announcement-wrapper {
    @apply flex items-center gap-4 border border-border/80 bg-secondary/50 rounded-full px-2 py-1 shadow-md;
  }
  .announcement-badge {
    @apply bg-primary/10 text-primary text-xs font-semibold px-3 py-1 rounded-full;
  }
  .announcement-message {
    @apply flex items-center gap-2 text-sm text-muted-foreground;
  }

  /* Navigation Link Underline Animation */
  .nav-link {
    @apply relative text-muted-foreground hover:text-foreground transition-colors duration-200;
  }
  .nav-link.nav-link-active {
    @apply text-foreground;
  }
}


.prose-styles {
  @apply prose prose-invert max-w-none prose-sm prose-p:font-body prose-headings:font-heading prose-a:text-primary hover:prose-a:text-primary/80 prose-strong:text-foreground;
  font-size: 0.9375rem; /* 15px for improved readability */
  line-height: 1.65;
}

/* Remove top/bottom margin from first/last elements in AI message bubbles */
.prose-styles > :first-child {
    margin-top: 0;
}
.prose-styles > :last-child {
    margin-bottom: 0;
}

.prose-styles p,
.prose-styles ul,
.prose-styles ol {
  line-height: 1.65;
  font-size: 0.9375rem; /* 15px */
  margin-top: 0.35rem;
  margin-bottom: 0.35rem;
}

.prose-styles p:first-child,
.prose-styles ul:first-child,
.prose-styles ol:first-child {
  margin-top: 0;
}

.prose-styles p:last-child,
.prose-styles ul:last-child,
.prose-styles ol:last-child {
  margin-bottom: 0;
}

.prose-styles h1,
.prose-styles h2,
.prose-styles h3,
.prose-styles h4,
.prose-styles h5,
.prose-styles h6 {
    font-size: 1rem; /* 16px for headings */
    margin-top: 0.75em;
    margin-bottom: 0.5em;
}

.prose-styles code {
    font-size: 0.8125rem; /* 13px */
}
